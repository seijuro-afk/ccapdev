<!-- Discussion Thread Page -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}} | {{brandName}}</title>
    <link rel="stylesheet" href="/css/style2.css">
    <style>
        .vote-feedback {
            color: green;
            margin-left: 10px;
        }
        .avatar-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <header class="thread-banner">
        <h1>{{discussion.title}}</h1>
        <p>Posted by <img src="{{discussion.authorAvatar}}" class="avatar-small"> {{discussion.author}} | {{formatDate discussion.date}}</p>
    </header>
    
    <section class="thread-content">
        <article class="original-post">
            <p>{{discussion.content}}</p>
            <div class="post-actions">
                <button class="upvote" data-post-id="{{discussion._id}}" autocomplete="new-password">
                    ▲ Upvote (<span class="upvote-count">{{discussion.upvotes}}</span>)
                </button>
                <button class="downvote" data-post-id="{{discussion._id}}" autocomplete="new-password">
                    ▼ Downvote (<span class="downvote-count">{{discussion.downvotes}}</span>)
                </button>
                <div class="vote-feedback"></div>
            </div>
        </article>
        
        <section class="replies">
            <h2>Replies ({{discussion.replies.length}})</h2>
            {{#each discussion.replies}}
            <div class="reply">
                <div class="reply-header">
                    <img src="{{this.authorAvatar}}" class="avatar-small">
                    <span class="reply-author">{{this.author}}</span>
                    <span class="reply-date">{{formatDate this.date}}</span>
                </div>
                <p>{{this.content}}</p>
                <div class="reply-actions">
                    <button class="upvote" autocomplete="off">▲ Upvote</button>
                    <button class="downvote" autocomplete="off">▼ Downvote</button>
                </div>
            </div>
            {{/each}}
        </section>
    </section>
    
    <aside class="sidebar">
        <h3>Related Discussions</h3>
        <ul>
            {{#each relatedDiscussions}}
            <li><a href="{{this.link}}">{{this.title}}</a></li>
            {{else}}
            <li>No related discussions found</li>
            {{/each}}
        </ul>
    </aside>
    
    <script src="/js/communities_script.js"></script>
</body>
</html>
